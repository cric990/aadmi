<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Premium Store</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <!-- 1. LOADING SCREEN -->
    <div id="splash-screen">
        <div class="loader"></div>
        <div class="splash-text">BANTY STORE</div>
    </div>

    <!-- 2. TOAST NOTIFICATION -->
    <div id="toast" class="toast">
        <i class="fas fa-bell" style="color:var(--gold); font-size:20px;"></i>
        <div>
            <div style="font-weight:bold; font-size:13px; color:#fff;" id="t-head">Notification</div>
            <div style="font-size:11px; color:#aaa;" id="t-body">Message</div>
        </div>
    </div>

    <!-- 3. AUTHENTICATION -->
    <div id="auth-ui" class="auth-overlay" style="display:none;">
        <div class="auth-card">
            <div class="brand" style="font-size:28px; margin-bottom:10px;">PREMIUM <span style="color:var(--gold)">STORE</span></div>
            <p style="color:#777; font-size:12px; margin-bottom:20px;">Login to Continue</p>
            <input type="text" id="u-name" class="inp" placeholder="Username (Min 4 chars)">
            <input type="password" id="u-pass" class="inp" placeholder="Password (Min 8 chars)">
            <button onclick="auth()" class="btn">LOGIN / REGISTER</button>
            <div style="margin-top:15px; font-size:11px; color:#555;">Auto-Account Creation</div>
        </div>
    </div>

    <!-- 4. NOTIFICATION CENTER -->
    <div id="notif-panel" class="notif-panel">
        <div class="np-head">
            <span>ALERTS (24H)</span>
            <i class="fas fa-times" style="cursor:pointer; color:#fff;" onclick="toggleNotif()"></i>
        </div>
        <div id="np-list" class="np-list">
            <div style="padding:20px; text-align:center; color:#555;">No alerts</div>
        </div>
    </div>

    <!-- 5. MAIN APP INTERFACE -->
    <div id="app-ui" style="display:none;">
        
        <header>
            <div class="brand" style="font-size:22px;">B<span>S</span></div>
            <div style="display:flex; gap:15px; align-items:center;">
                <div class="wallet-pill wallet-chip">
                    <i class="fas fa-bolt"></i> â‚¹<span id="u-bal">0</span>
                </div>
                <div class="notif-wrapper" onclick="toggleNotif()">
                    <i class="fas fa-bell bell-icon"></i>
                    <div id="n-dot" class="n-dot"></div>
                </div>
            </div>
        </header>

        <!-- PAGE: HOME -->
        <div id="p-home" class="page active">
            <div class="section-title">Products</div>
            <div id="prod-grid" class="grid">
                <p style="color:gray; padding:20px;">Loading Products...</p>
            </div>
        </div>

        <!-- PAGE: DEPOSIT -->
        <div id="p-add" class="page">
            <div class="section-title">Add Funds</div>
            <div class="auth-card" style="width:100%; max-width:100%; border:1px solid #333;">
                <p style="color:#aaa; font-size:12px; margin-bottom:10px;">Enter amount to generate QR</p>
                <input type="number" id="d-amt" class="inp" placeholder="Amount (e.g. 100)" oninput="genQR()">
                
                <div id="qr-wrap" style="display:none; text-align:center;">
                    <div class="qr-frame"><img id="qr-img" src="" class="qr-img"></div>
                    <p style="color:var(--gold); font-size:12px; font-weight:bold; margin-bottom:5px;">Scan to Pay</p>
                    <p style="color:gray; font-size:10px; margin-bottom:15px;">Use GPay / PhonePe / Paytm</p>
                    <input type="text" id="d-utr" class="inp" placeholder="Enter 12 Digit UTR / Ref No.">
                    <button onclick="submitDep()" class="btn">SUBMIT REQUEST</button>
                </div>
            </div>
        </div>

        <!-- PAGE: HISTORY -->
        <div id="p-hist" class="page">
            <div class="section-title">History</div>
            <div id="h-list"></div>
        </div>

        <!-- PAGE: PROFILE -->
        <div id="p-prof" class="page">
            <div class="section-title">Profile</div>
            <div style="text-align:center; padding:25px; background:#111; border-radius:15px; border:1px solid #333;">
                <img id="my-av" src="" style="width:90px; height:90px; border-radius:50%; border:2px solid var(--gold); margin-bottom:10px;">
                <h3 id="my-u" style="color:white; margin-bottom:20px;">User</h3>
                
                <div style="display:flex; justify-content:center; gap:10px; margin-bottom:20px;">
                    <button onclick="updAv('https://api.dicebear.com/7.x/avataaars/svg?seed=King')" class="badge-btn bg-blue">ðŸ‘¨ Male</button>
                    <button onclick="updAv('https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka')" class="badge-btn bg-blue">ðŸ‘© Female</button>
                </div>
                
                <input type="text" id="new-name" class="inp" placeholder="New Name">
                <button onclick="saveProf()" class="btn btn-sec">UPDATE</button>
                <div onclick="logout()" style="color:red; margin-top:20px; font-size:12px; cursor:pointer;">LOGOUT</div>
            </div>
        </div>

        <!-- PAGE: SUPPORT -->
        <div id="p-help" class="page">
            <div class="section-title">Support</div>
            <textarea id="s-msg" class="inp" rows="5" placeholder="Describe your issue..."></textarea>
            <button onclick="sendHelp()" class="btn">SEND MESSAGE</button>
        </div>

        <!-- BOTTOM NAV -->
        <div class="btm-nav">
            <i class="fas fa-store n-icon active" onclick="nav('home', this)"></i>
            <i class="fas fa-wallet n-icon" onclick="nav('add', this)"></i>
            <i class="fas fa-history n-icon" onclick="nav('hist', this)"></i>
            <i class="fas fa-user n-icon" onclick="nav('prof', this)"></i>
            <i class="fas fa-headset n-icon" onclick="nav('help', this)"></i>
        </div>

    </div>

    <!-- PAYMENT MODAL -->
    <div id="buy-mod" class="auth-overlay" style="display:none;">
        <div class="auth-card">
            <i class="fas fa-times" style="float:right; cursor:pointer; color:#666;" onclick="document.getElementById('buy-mod').style.display='none'"></i>
            <h3 style="color:#fff; margin-bottom:10px;">Purchase</h3>
            <p style="color:gray; font-size:12px; margin-bottom:20px;">Price: <span style="color:var(--gold); font-weight:bold;">â‚¹<span id="pay-amt">0</span></span></p>
            
            <div id="step1">
                <button id="btn-w" onclick="payWallet()" class="btn" style="margin-bottom:10px;">PAY VIA WALLET</button>
                <button onclick="payUPI()" class="btn btn-sec">DIRECT UPI</button>
            </div>

            <div id="step2" style="display:none;">
                <input type="email" id="p-em" class="inp" placeholder="Email for Delivery">
                <div id="utr-field" style="display:none;">
                    <input type="text" id="p-utr" class="inp" placeholder="UTR (If Direct Pay)">
                </div>
                <button onclick="finOrd()" class="btn">CONFIRM ORDER</button>
            </div>
        </div>
    </div>

    <!-- FIREBASE -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="app.js"></script>

</body>
</html>